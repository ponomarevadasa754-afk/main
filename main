def check_winner(board):
   
    winning_combinations = [
        [0, 1, 2], [3, 4, 5], [6, 7, 8],  
        [0, 3, 6], [1, 4, 7], [2, 5, 8],  
        [0, 4, 8], [2, 4, 6]              
    ] 
    for combo in winning_combinations:
        if board[combo[0]] == board[combo[1]] == board[combo[2]] != " ":
            return board[combo[0]]
    return None
    def check_draw(board):
    return " " not in board
    def restart_game():
    while True:
        choice = input("–•–æ—á–µ—à—å —Å—ã–≥—Ä–∞—Ç—å –µ—â—ë —Ä–∞–∑? (y/n): ").lower()
        if choice in ['y', '–Ω']:  # –Ω - –¥–ª—è —Ä—É—Å—Å–∫–æ–π —Ä–∞—Å–∫–ª–∞–¥–∫–∏
            return True
        elif choice in ['n', '—Ç']:  # —Ç - –¥–ª—è —Ä—É—Å—Å–∫–æ–π —Ä–∞—Å–∫–ª–∞–¥–∫–∏
            return False
        else:
            print("–í–≤–µ–¥–∏ 'y' (–¥–∞) –∏–ª–∏ 'n' (–Ω–µ—Ç)")
def get_player_input(board, current_player):
    while True:
        try:
            position = int(input(f"–ò–≥—Ä–æ–∫ {current_player}, –≤—ã–±–µ—Ä–∏ –ø–æ–∑–∏—Ü–∏—é (1-9): "))
            if 1 <= position <= 9:
                if board[position-1] == " ":
                    return position - 1
                else:
                    print("–≠—Ç–∞ –∫–ª–µ—Ç–∫–∞ —É–∂–µ –∑–∞–Ω—è—Ç–∞! –í—ã–±–µ—Ä–∏ –¥—Ä—É–≥—É—é.")
            else:
                print("–í–≤–µ–¥–∏ —á–∏—Å–ª–æ –æ—Ç 1 –¥–æ 9!")
        except ValueError:
            print("–ù—É–∂–Ω–æ –≤–≤–µ—Å—Ç–∏ —á–∏—Å–ª–æ!")
def display_board(board):
    print(f"\n {board[0]} | {board[1]} | {board[2]} ")
    print("-----------")
    print(f" {board[3]} | {board[4]} | {board[5]} ")
    print("-----------")
    print(f" {board[6]} | {board[7]} | {board[8]} \n")
def display_rules():
    print("\n=== –ü–†–ê–í–ò–õ–ê –ò–ì–†–´ ===")
    print("–ò–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ –ø—Ä–æ–Ω—É–º–µ—Ä–æ–≤–∞–Ω–æ —Ç–∞–∫:")
    print(" 1 | 2 | 3 ")
    print("-----------")
    print(" 4 | 5 | 6 ")
    print("-----------")
    print(" 7 | 8 | 9 ")
    print("\n–ò–≥—Ä–æ–∫–∏ –ø–æ –æ—á–µ—Ä–µ–¥–∏ —Å—Ç–∞–≤—è—Ç X –∏ O –Ω–∞ —Å–≤–æ–±–æ–¥–Ω—ã–µ –∫–ª–µ—Ç–∫–∏")
    print("–ü–µ—Ä–≤—ã–π, —Å–æ–±—Ä–∞–≤—à–∏–π 3 –≤ —Ä—è–¥ (–ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏, –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ –∏–ª–∏ –¥–∏–∞–≥–æ–Ω–∞–ª–∏) - –ø–æ–±–µ–∂–¥–∞–µ—Ç!\n")
def main():
    display_rules()
    while True:
        
        board = [" "] * 9
        current_player = "X"
        game_over = False
        while not game_over:
            display_board(board)
            
            position = get_player_input(board, current_player)
            board[position] = current_player
            winner = check_winner(board)
            if winner:
                display_board(board)
                print(f"üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è—é! –ò–≥—Ä–æ–∫ {winner} –ø–æ–±–µ–¥–∏–ª! üéâ")
                game_over = True
           
            elif check_draw(board):
                display_board(board)
                print(" –ù–∏—á—å—è!")
                game_over = True
            else:
                
                current_player = "O" if current_player == "X" else "X"
        
        if not restart_game():
            print("–°–ø–∞—Å–∏–±–æ –∑–∞ –∏–≥—Ä—É! –î–æ –≤—Å—Ç—Ä–µ—á–∏! ")
            break
        else:
            print("\n" + "="*40)
            print("–ù–ê–ß–ò–ù–ê–ï–ú –ù–û–í–£–Æ –ò–ì–†–£!")
            print("="*40)



if __name__ == "__main__":
    main()
